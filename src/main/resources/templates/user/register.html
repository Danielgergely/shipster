<!-- Daniel -->
<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head th:replace="general.html :: headerfiles(title='Register')"></head>
<body class="p-0 bg-register">
<div class="container home-div d-flex justify-content-center">
    <form class="form-signin" method="post" action="#" th:action="@{/register}">
        <h2 class="form-signin-heading text-centered shipster-text-light">Create a Shipster account</h2>
        <p>
            <label for="firstname" class="sr-only shipster-text-light">First name</label>
            <input th:field="*{user.firstName}" type="text" id="firstname" name="firstname" class="form-control"
                   placeholder="First  name" required=""
                   autofocus="" autocomplete="off">
        </p>
        <p>
            <label for="lastname" class="sr-only shipster-text-light">Last name</label>
            <input th:field="*{user.lastName}" type="text" id="lastname" name="lastname" class="form-control"
                   placeholder="Last name" required=""
                   autocomplete="off">
        </p>
        <p>
            <label for="username" class="sr-only shipster-text-light">Username</label>
            <input th:field="*{user.userName}" type="text" id="username" name="username" class="form-control"
                   placeholder="Username" required=""
                   autofocus="" autocomplete="off">
        </p>
        <p>
            <input th:field="*{user.gender}" type="radio" id="male" name="gender" value="male" required>
            <label for="male" class="shipster-text-light">Male</label>
            <input type="radio" id="female" name="gender" value="female">
            <label for="female" class="shipster-text-light">Female</label><br>
        </p>
        <p>
            <label for="email" class="sr-only shipster-text-light">Email</label>
            <input th:field="*{user.email}" type="email" id="email" name="email" class="form-control"
                   placeholder="Email" required=""
                   autocomplete="off">
        </p>
        <p>
            <label for="password" class="sr-only shipster-text-light">Password</label>
            <input th:field="*{user.password}" type="password" id="password" name="password" class="form-control"
                   placeholder="Password" required=""
                   autocomplete="off">
        </p>

        <h3 class="form-signin-heading text-centered shipster-text-light">Address information</h3>
        <p>
            <label for="street" class="sr-only shipster-text-light">Street</label>
            <input th:field="*{address.street}" type="text" id="street" name="street" class="form-control"
                   placeholder="Street" required=""
                   autofocus="" autocomplete="off">
        </p>
        <p>
            <label for="number" class="sr-only shipster-text-light">Number</label>
            <input th:field="*{address.number}" type="text" id="number" name="number" class="form-control"
                   placeholder="Number" required=""
                   autofocus="" autocomplete="off">
        </p>
        <p>
            <label for="city" class="sr-only shipster-text-light">City</label>
            <input th:field="*{address.city}" type="text" id="city" name="city" class="form-control" placeholder="City"
                   required=""
                   autofocus="" autocomplete="off">
        </p>
        <p>
            <label for="zip" class="sr-only shipster-text-light">ZIP</label>
            <input th:field="*{address.zip}" type="text" id="zip" name="zip" class="form-control" placeholder="ZIP"
                   required=""
                   autofocus="" autocomplete="off">
        </p>
        <p>
            <label for="country" class="sr-only shipster-text-light">Country</label>
            <input th:field="*{address.country}" type="text" id="country" name="country" class="form-control"
                   placeholder="Country" required=""
                   autofocus="" autocomplete="off">
        </p>

        <div>
            <div class="ui-widget">
                <label for="search_address" class="sr-only shipster-text-light">Address</label>
                <input type="text" id="search_address" name="address" class="form-control" placeholder="Country"
                       required=""
                       autofocus="" autocomplete="off">
            </div>
            <div id="searchResult" class="ui-widget" style="margin-top: 1em;">
            </div>
        </div>

        <button class="btn btn-outline-secondary" type="submit">Register</button>
        <div th:if="${message != null}" class="col-md-12 pb-2">
            <h5 class="fst-italic text-centered text-error" th:text="${message}"></h5>
        </div>
    </form>
</div>
</body>

<script type="text/javascript">
    $(document).ready(function () {
        $("#search_address").autocomplete({
            source: function (request, response) {
                $.ajax({
                    url: "http://dev.virtualearth.net/REST/v1/Locations",
                    dataType: "jsonp",
                    data: {
                        key: "AvoMg355hzmFo7_Z3oXH0rlIMbBG2GQPM9kJVOpxMvpa2UaiVxm61yKNzxKJc6ks",
                        q: request.term
                    },
                    jsonp: "jsonp",
                    success: function (data) {
                        let result = data.resourceSets[0];
                        if (result) {
                            if (result.estimatedTotal > 0) {
                                response($.map(result.resources, function (item) {
                                    return {
                                        data: item,
                                        label: item.name + ' (' + item.address.countryRegion + ')',
                                        value: item.name
                                    }
                                }));
                            }
                        }
                    }
                });
            },
            minLength: 1,
            change: function (event, ui) {
                if (!ui.item)
                    $("#searchBox").val('');
            },
            select: function (event, ui) {
                displaySelectedItem(ui.item.data);
            }
        });
    });
    function displaySelectedItem(item) {
        // $("#searchResult").empty().append('Result: ' + item.name).append(' (Latitude: ' + item.point.coordinates[0] + ' Longitude: ' + item.point.coordinates[1] + ')');
    }
</script>

</html>
